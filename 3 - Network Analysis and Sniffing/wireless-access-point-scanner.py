import os
from scapy.all import *

def scan_aps(interface):
    aps = []

    def packet_handler(packet):
        if packet.haslayer(Dot11Beacon):
            ssid = packet[Dot11Elt].info.decode()
            bssid = packet[Dot11].addr3
            channel = int(ord(packet[Dot11Elt:3].info))
            if bssid not in [ap['bssid'] for ap in aps]:
                aps.append({'ssid': ssid, 'bssid': bssid, 'channel': channel})
                print(f"SSID: {ssid}, BSSID: {bssid}, Channel: {channel}")

    os.system(f"iwconfig {interface} mode monitor")
    sniff(iface=interface, prn=packet_handler, count=0)

if __name__ == "__main__":
    interface = 'wlan0'
    scan_aps(interface)
